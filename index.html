<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Day in the Life: A Travel Adventure</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 24px;
            box-sizing: border-box;
        }

        .container {
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 48px;
            max-width: 1000px;
            width: 100%;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 1.125rem;
            color: #4a5568;
            margin-bottom: 32px;
        }

        .scores {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .score-card {
            background-color: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, background-color 0.3s ease;
        }

        .score-card:hover {
            transform: translateY(-5px);
        }

        .score-card h3 {
            font-weight: 600;
            font-size: 1.25rem;
            margin-bottom: 8px;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 800;
            transition: color 0.3s ease, transform 0.2s ease;
        }

        .score-card.increase {
            background-color: #d1fae5;
        }

        .score-card.decrease {
            background-color: #fee2e2;
        }

        .story-box {
            background-color: #f1f5f9;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .story-text {
            font-size: 1.25rem;
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 24px;
        }

        .story-image {
            width: auto;
            height: 350px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .choice-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 100%;
            max-width: 600px;
        }

        .choice-button {
            padding: 16px 24px;
            border-radius: 10px;
            font-weight: 600;
            text-align: left;
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid #e2e8f0;
        }

        .choice-button.enabled {
            background-color: #6366f1;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .choice-button.enabled:hover {
            background-color: #4f46e5;
            transform: translateY(-2px);
        }

        .choice-button.disabled {
            background-color: #e2e8f0;
            color: #a0aec0;
            cursor: not-allowed;
        }

        .cost-label strong {
            color: #f7f3b4;
            font-weight: 600;
        }

        .cost-label strong.cost-positive {
            color: #adff71;
            font-weight: 600;
        }

        .cost-label strong.cost-negative {
            color: #f99b96;
            font-weight: 600;
        }

        button:disabled .cost-label {
            color: #a1a1a1 !important;
            font-weight: 600;
        }

        button:disabled .cost-label strong {
            color: #b8b8b8 !important;
            font-weight: 600;
        }

        .final-message {
            font-size: 1.5rem;
            font-weight: 600;
            color: #16a34a;
        }

        .summary-message {
            font-size: 1rem;
            font-weight: 400;
            color: #4a5568;
            text-align: left;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        @media (min-width: 640px) {
            .scores {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>

<body class="bg-gray-50 flex items-center justify-center min-h-screen p-6">
    <div class="container bg-white rounded-2xl shadow-2xl p-12 max-w-4xl w-full">
        <div class="header text-center">
            <h1 class="text-5xl font-extrabold text-gray-900">A Day in the Life: A Travel Adventure</h1>
            <p class="text-xl text-gray-600 mt-2">Make choices and explore the world</p>
        </div>

        <!-- Resources Section -->
        <div class="scores">
            <div id="energy" class="score-card text-center bg-yellow-50 border-yellow-200">
                <h3 class="text-yellow-800">Energy</h3>
                <div class="score-value text-yellow-600">10</div>
            </div>
            <div id="social" class="score-card text-center bg-purple-50 border-purple-200">
                <h3 class="text-purple-800">Social</h3>
                <div class="score-value text-purple-600">10</div>
            </div>
            <div id="experience" class="score-card text-center bg-blue-50 border-blue-200">
                <h3 class="text-blue-800">Experience</h3>
                <div class="score-value text-blue-600">10</div>
            </div>
            <div id="money" class="score-card text-center bg-green-50 border-green-200">
                <h3 class="text-green-800">Money</h3>
                <div class="score-value text-green-600">10</div>
            </div>
        </div>

        <!-- Story Area -->
        <div class="game-area mt-8">
            <div id="storyBox" class="story-box">
                <img id="storyImage" class="story-image" src="https://i.imgur.com/mm69OIZ.png"
                    alt="A starting image of an adventure.">
                <p id="storyText" class="text-2xl text-gray-700 font-semibold mb-6">Your flight just landed in a
                    bustling new city! It's early morning, and you have a full day ahead. You're a little tired from the
                    long flight, and you're not sure where to go first. What do you do?</p>
                <div id="choiceButtons" class="choice-buttons">
                    <button id="startButton" class="enabled choice-button" onclick="startGame()">Begin the
                        Adventure</button>
                </div>
            </div>
        </div>

        <script>
            let resources = {};
            let storyLog = [];
            let showingConsequence = false;
            let nextScenarioIndex = 0;

            const scenarios = [
                // Scenario 1: Morning in a new city (4 choices)
                {
                    text: "Your flight just landed in a bustling new city! It's early morning, and you have a full day ahead. You're a little tired from the long flight, and you're not sure where to go first. What do you do?",
                    image: "https://i.imgur.com/mm69OIZ.png",
                    choices: [
                        {
                            text: "Head straight to a famous museum. You want to see the sights while the crowds are thin.",
                            costs: { energy: -2, social: -1, experience: 3, money: -2 },
                            consequence: "You spent the morning exploring a museum. The solitude allowed you to fully appreciate the exhibits, boosting your Experience. You feel a bit tired but very fulfilled.",
                            consequenceImage: "https://i.imgur.com/haBfA7o.png"
                        },
                        {
                            text: "Find a local cafe and people-watch. It's a great way to soak up the culture and recharge.",
                            costs: { energy: 2, social: 1, experience: 1, money: -1 },
                            consequence: "You found a cozy cafe and watched the city wake up. Your Energy and Social scores increased, and you gained a small amount of Experience by observing local life.",
                            consequenceImage: "https://i.imgur.com/8kzdVWS.png"
                        },
                        {
                            text: "Take a nap at your hotel. You'll need your energy for the rest of the day.",
                            costs: { energy: 4, social: -2, experience: -1, money: 0 },
                            consequence: "You took a much-needed nap. Your Energy is now high, but you've lost valuable time and feel a little disconnected from the city. You're well-rested but missed out on some morning opportunities.",
                            consequenceImage: "https://i.imgur.com/ACpjkQy.png"
                        },
                        {
                            text: "Join a free walking tour. It's a cheap way to learn about the city and meet other travelers.",
                            costs: { energy: -2, social: 2, experience: 2, money: -1 },
                            consequence: "You joined a walking tour and met some new people. Your Social and Experience scores are up, but you're a bit tired from all the walking. It was a great way to start the trip.",
                            consequenceImage: "https://i.imgur.com/TW66JH9.png"
                        }
                    ]
                },
                // Scenario 2: Lunch Time Dilemma (3 choices)
                {
                    text: "It's lunchtime. You can either eat at an expensive, highly-rated restaurant, or grab a quick and cheap meal from a street vendor. You notice some locals are selling handmade crafts nearby.",
                    image: "https://placehold.co/800x400/FFB74D/FFFFFF?text=Lunchtime+Dilemma",
                    choices: [
                        {
                            text: "Eat at the fancy restaurant. You want to try the best local cuisine.",
                            costs: { energy: 0, social: 1, experience: 2, money: -4 },
                            consequence: "The meal was incredible and your Experience score increased. You even had a nice conversation with the waiter. However, your money is now a bit low, and you'll need to be more careful with your spending.",
                            consequenceImage: "https://placehold.co/800x400/FFA726/FFFFFF?text=Fancy+Meal"
                        },
                        {
                            text: "Go for the street food. It's authentic, cheap, and fast.",
                            costs: { energy: 1, social: 0, experience: 1, money: 1 },
                            consequence: "The street food was delicious and you saved money. You feel a small boost in both Energy and Experience, as you got to see a different side of the city's food culture. You are feeling good and have some money left over.",
                            consequenceImage: "https://placehold.co/800x400/FB8C00/FFFFFF?text=Street+Food"
                        },
                        {
                            text: "Skip lunch to save money and talk to the craft vendors.",
                            costs: { energy: -2, social: 2, experience: 2, money: 2 },
                            consequence: "You didn't eat, so your energy is a bit low, but you had great conversations with the local vendors and learned about their craft. Your Social and Experience scores are up, and you saved some money. You're a bit hungry, but you're now a bit more connected.",
                            consequenceImage: "https://placehold.co/800x400/FF9800/FFFFFF?text=Local+Crafts"
                        }
                    ]
                },
                // Scenario 3: Afternoon Adventure (4 choices)
                {
                    text: "The afternoon is yours. A group of fellow travelers invites you to a hidden trail for an adventurous hike, while another suggests going to a free cultural festival. You also have the option to visit a quiet, beautiful park to rest.",
                    image: "https://placehold.co/800x400/90CAF9/FFFFFF?text=Afternoon+Adventure",
                    choices: [
                        {
                            text: "Join the adventurous hike. You're here for the thrill!",
                            costs: { energy: -4, social: 3, experience: 3, money: -1 },
                            consequence: "The hike was challenging but exhilarating! Your Social and Experience scores are high, but you're completely exhausted. Your money also took a small hit for the transportation to the trail.",
                            consequenceImage: "https://placehold.co/800x400/64B5F6/FFFFFF?text=Adventurous+Hike"
                        },
                        {
                            text: "Attend the cultural festival. It's a perfect way to immerse yourself.",
                            costs: { energy: -2, social: 2, experience: 4, money: -2 },
                            consequence: "You had a great time at the festival, learning about local traditions and meeting new people. Your Social and Experience scores increased significantly, but you're now a bit low on energy and money from buying a few souvenirs.",
                            consequenceImage: "https://placehold.co/800x400/42A5F5/FFFFFF?text=Cultural+Festival"
                        },
                        {
                            text: "Visit the park to relax. Your body needs a break.",
                            costs: { energy: 3, social: 0, experience: 0, money: 0 },
                            consequence: "You spent a quiet afternoon in the park. Your Energy is restored, but you didn't gain much in the way of Experience or Social. It was a nice, peaceful break from the chaos of the city.",
                            consequenceImage: "https://placehold.co/800x400/2196F3/FFFFFF?text=Quiet+Park"
                        },
                        {
                            text: "Go back to the hotel to plan your next leg of the trip.",
                            costs: { energy: 1, social: -1, experience: 1, money: 0 },
                            consequence: "You went back to your hotel to plan the next leg of your trip. Your energy is up, and you feel more organized, but you missed out on an opportunity to explore the city and meet new people. You feel a bit more prepared now.",
                            consequenceImage: "https://placehold.co/800x400/1E88E5/FFFFFF?text=Planning+the+Trip"
                        }
                    ]
                },
                // Scenario 4: An Unexpected Problem (3 choices)
                {
                    text: "It's evening. You're walking back to your hotel and realize your wallet is missing! It contains some cash and your credit cards. You can either backtrack to find it, ask for help from a stranger, or immediately head to the police station.",
                    image: "https://placehold.co/800x400/EF5350/FFFFFF?text=Unexpected+Problem",
                    choices: [
                        {
                            text: "Backtrack to find it. You remember the last place you used it.",
                            costs: { energy: -3, social: 0, experience: 1, money: -5 },
                            consequence: "You retraced your steps and, miraculously, found your wallet! Your money is safe, but you're exhausted and a little shaken. This was a valuable (and scary) experience. This was a story of great challenge and a lesson in what not to do.",
                            consequenceImage: "https://placehold.co/800x400/E53935/FFFFFF?text=Finding+Wallet"
                        },
                        {
                            text: "Ask a kind-looking local for help.",
                            costs: { energy: -1, social: 3, experience: 2, money: -5 },
                            consequence: "You asked a local for help, and they were incredibly kind. They helped you call the bank and the police. Your Social and Experience scores increased, and you felt a sense of community. The wallet is gone, but you're in a better situation because of the kindness of strangers.",
                            consequenceImage: "https://placehold.co/800x400/F44336/FFFFFF?text=Asking+for+Help"
                        },
                        {
                            text: "Go straight to the police station. It's the most secure option.",
                            costs: { energy: -2, social: -1, experience: 0, money: -5 },
                            consequence: "You went straight to the police. It was a long, bureaucratic process, but you felt safe. The wallet is still lost, but you've filed a report. Your Energy and Social scores have taken a hit, but you've handled the situation responsibly.",
                            consequenceImage: "https://placehold.co/800x400/C62828/FFFFFF?text=Police+Station"
                        }
                    ]
                },
                // Scenario 5: Farewell Dinner (3 choices)
                {
                    text: "It's your last night in the city. You've had a long day and are feeling a mix of emotions. You can either have a quiet dinner alone, join a group of new friends for a farewell party, or go to a live music show.",
                    image: "https://placehold.co/800x400/BA68C8/FFFFFF?text=Farewell+Evening",
                    choices: [
                        {
                            text: "Have a quiet dinner alone. You want to reflect on your journey.",
                            costs: { energy: 1, social: -2, experience: 2, money: -2 },
                            consequence: "You had a quiet, reflective dinner. Your Energy is restored, and you gained a deeper appreciation for your Experience. You feel a bit lonely, but you're glad you took the time to reflect.",
                            consequenceImage: "https://placehold.co/800x400/9575CD/FFFFFF?text=Quiet+Dinner"
                        },
                        {
                            text: "Join your new friends for a farewell party. It's a great way to celebrate.",
                            costs: { energy: -3, social: 4, experience: 1, money: -3 },
                            consequence: "The farewell party was a blast! Your Social score is high, and you've made some great memories. However, you're exhausted and your money is a bit low. You feel like you've made some great connections, but you're now at a crucial point of the story.",
                            consequenceImage: "https://placehold.co/800x400/7E57C2/FFFFFF?text=Farewell+Party"
                        },
                        {
                            text: "Go to a live music show. You want to see the city's nightlife.",
                            costs: { energy: -2, social: 1, experience: 3, money: -3 },
                            consequence: "The live music show was amazing! Your Experience score is high, and you had a great time. Your Social score is also up, but your Energy and Money have taken a hit. You feel like you've seen a different side of the city, and you're now at a crucial point of the story.",
                            consequenceImage: "https://placehold.co/800x400/5E35B1/FFFFFF?text=Live+Music+Show"
                        }
                    ]
                }
            ];

            const endings = {
                success: {
                    text: "You successfully balanced your energy, social life, experience, and budget. Your journey was a perfect mix of cultural immersion, thrilling adventures, and new friendships. You truly mastered the art of travel!",
                    image: "https://placehold.co/800x400/4CAF50/FFFFFF?text=Successful+Journey"
                },
                balanced: {
                    text: "You made it through the trip, but it was a bit chaotic. Your scores are all over the place, a testament to your unpredictable but memorable journey. You learned a lot, but you're heading home with a few good stories and a lot of lessons learned.",
                    image: "https://placehold.co/800x400/FF9800/FFFFFF?text=Memorable+Journey"
                },
                failure: {
                    text: "The trip was a disaster. You ran out of money, missed out on key experiences, and ended up feeling more stressed than relaxed. It seems like you bit off more than you could chew. It was a great challenge, and a lesson in what not to do.",
                    image: "https://placehold.co/800x400/F44336/FFFFFF?text=Disastrous+Journey"
                }
            };

            const scoreElements = {
                energy: document.getElementById('energy').querySelector('.score-value'),
                social: document.getElementById('social').querySelector('.score-value'),
                experience: document.getElementById('experience').querySelector('.score-value'),
                money: document.getElementById('money').querySelector('.score-value')
            };

            const scoreCardElements = {
                energy: document.getElementById('energy'),
                social: document.getElementById('social'),
                experience: document.getElementById('experience'),
                money: document.getElementById('money')
            };

            const storyTextElement = document.getElementById('storyText');
            const storyImageElement = document.getElementById('storyImage');
            const choiceButtonsContainer = document.getElementById('choiceButtons');

            /**
             * Renders the current state of the game.
             */
            function renderGame() {
                // Update scores
                for (const key in resources) {
                    scoreElements[key].textContent = resources[key];
                }

                // If all scenarios are done, display the ending.
                if (nextScenarioIndex >= scenarios.length) {
                    displayEnding();
                    return;
                }

                // If a consequence is being shown, hide buttons and wait for a click.
                if (showingConsequence) {
                    choiceButtonsContainer.innerHTML = `<button class="enabled choice-button" onclick="continueStory()">Continue</button>`;
                    return;
                }

                const scenario = scenarios[nextScenarioIndex];
                storyTextElement.textContent = scenario.text;
                storyImageElement.src = scenario.image; // Update the image
                choiceButtonsContainer.innerHTML = ''; // Clear previous buttons

                let anyChoicesEnabled = false;

                scenario.choices.forEach((choice) => {
                    const button = document.createElement('button');
                    button.classList.add('choice-button', 'text-sm', 'sm:text-base');
                    button.innerHTML = `${choice.text} <span class="cost-label">Costs: ${formatCosts(choice.costs)}</span>`;

                    const canAfford = Object.keys(choice.costs).every(costType => resources[costType] >= -choice.costs[costType]);
                    if (canAfford) {
                        button.classList.add('enabled');
                        button.onclick = () => handleChoice(choice);
                        anyChoicesEnabled = true;
                    } else {
                        button.classList.add('disabled');
                        button.disabled = true;
                    }
                    choiceButtonsContainer.appendChild(button);
                });

                // If no choices are available, add a new button to end the game.
                if (!anyChoicesEnabled) {
                    const endGameButton = document.createElement('button');
                    endGameButton.classList.add('choice-button', 'enabled', 'bg-red-500', 'hover:bg-red-600', 'text-white');
                    endGameButton.textContent = 'End Day Early';
                    endGameButton.onclick = endGameEarly;
                    choiceButtonsContainer.appendChild(endGameButton);
                }
            }

            /**
             * Formats the cost/gain object into a readable string.
             */
            function formatCosts(costs) {
                return Object.entries(costs).map(([key, value]) => {
                    let costClass = '';
                    const sign = value > 0 ? '+' : '';

                    if (value > 0)
                        costClass = 'cost-positive';
                    else if (value < 0)
                        costClass = 'cost-negative';

                    const classAttr = costClass.length > 0 ? ` class='${costClass}'` : '';
                    return `<strong${classAttr}>${key.charAt(0).toUpperCase() + key.slice(1)}: ${sign}${value}</strong>`;
                }).join(', ');
            }

            /**
             * Handles a player's choice, updating resources and moving to the next scenario.
             */
            function handleChoice(choice) {
                // Apply the resource costs/gains
                for (const key in choice.costs) {
                    const oldValue = resources[key];
                    resources[key] += choice.costs[key];

                    // Add visual feedback
                    if (choice.costs[key] !== 0) {
                        scoreCardElements[key].classList.add(choice.costs[key] < 0 ? 'decrease' : 'increase');
                        setTimeout(() => {
                            scoreCardElements[key].classList.remove('decrease', 'increase');
                        }, 500);
                    }
                }

                // Store the consequence in the story log
                storyLog.push(choice.consequence);

                // Show the consequence text and image.
                storyTextElement.textContent = choice.consequence;
                storyImageElement.src = choice.consequenceImage; // Update the image
                showingConsequence = true;
                nextScenarioIndex++;
                renderGame();
            }

            /**
             * Continues the story after a consequence has been shown.
             */
            function continueStory() {
                showingConsequence = false;
                renderGame();
            }

            /**
             * Displays the final ending of the story based on resources and past choices.
             */
            function displayEnding() {
                let ending = null;
                const totalScore = Object.values(resources).reduce((sum, current) => sum + current, 0);

                // Determine the ending message and image
                if (totalScore >= 35 && resources.experience > 10) {
                    ending = endings.success;
                    storyTextElement.classList.add('final-message', 'text-green-600');
                } else if (totalScore >= 20) {
                    ending = endings.balanced;
                    storyTextElement.classList.add('final-message', 'text-orange-600');
                } else {
                    ending = endings.failure;
                    storyTextElement.classList.add('final-message', 'text-red-600');
                }

                // Create a full story summary with line breaks for separation
                const fullStory = `Your adventure began when you landed in a bustling new city. Your choices led you on a journey where you: ${storyLog.join(' ')}<br><br>In the end, your journey concluded with this final outcome: ${ending.text}`;

                // Use innerHTML to render the line breaks correctly
                storyTextElement.innerHTML = fullStory;
                storyImageElement.src = ending.image; // Update the image for the ending
                storyTextElement.classList.remove('text-2xl', 'font-semibold');
                storyTextElement.classList.add('summary-message');
                choiceButtonsContainer.innerHTML = `<button class="enabled choice-button" onclick="startGame()">Play Again</button>`;
            }

            /**
             * Jumps to the end of the game when the player cannot make any more choices.
             */
            function endGameEarly() {
                storyLog.push("You couldn't afford any more choices and had to end your day early, missing out on the final activities.");
                nextScenarioIndex = scenarios.length;
                renderGame();
            }

            /**
             * Initializes the game.
             */
            function startGame() {
                nextScenarioIndex = 0;
                showingConsequence = false;
                storyLog = []; // Reset the story log
                resources = {
                    energy: 10,
                    social: 10,
                    experience: 10,
                    money: 10
                };
                storyTextElement.classList.remove('final-message', 'text-green-600', 'text-orange-600', 'text-red-600', 'summary-message');
                storyTextElement.classList.add('text-2xl', 'font-semibold');
                renderGame();
            }
        </script>
    </div>
</body>

</html>